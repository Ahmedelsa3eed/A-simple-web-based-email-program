package com.example.email.Server.Contact;

import com.example.email.Server.controller.SingleTonServer;
import java.io.File;
import java.util.ArrayList;

public class AddContact {
    SingleTonServer server = SingleTonServer.getInstance();

    public ArrayList<ContactUser> addContact(ContactUser contactUser) {
        for (String email: contactUser.getEmails()){
            if (!checkEmail(email)){
                System.out.println("there is no account with that mailAddress");
                return server.contacts;
            }
        }
        server.contacts.add(contactUser);
        return server.contacts;
    }

    private boolean checkEmail(String email){
        File data = new File("data");
        String []files = data.list();
        if (files.length==0){
            return false;
        }
        else {
            for (String file : files){
                if (email.equals(file)){
                    return true;
                }
            }
        }
        return false;
    }

}
